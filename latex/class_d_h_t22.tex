\hypertarget{class_d_h_t22}{}\section{D\+H\+T22 Class Reference}
\label{class_d_h_t22}\index{D\+H\+T22@{D\+H\+T22}}


\hyperlink{class_d_h_t22}{D\+H\+T22} sensor class.  




{\ttfamily \#include $<$Erriez\+D\+H\+T22.\+h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_d_h_t22_a6983635331e939d679888b4a936e0f53}{D\+H\+T22} (uint8\+\_\+t pin)
\begin{DoxyCompactList}\small\item\em Constructor \hyperlink{class_d_h_t22}{D\+H\+T22} sensor. \end{DoxyCompactList}\item 
void \hyperlink{class_d_h_t22_a6ecc18f5b1354e013d717a662f2e9e3d}{begin} (uint8\+\_\+t num\+Samples=0)
\begin{DoxyCompactList}\small\item\em Initialize sensor. \end{DoxyCompactList}\item 
bool \hyperlink{class_d_h_t22_a70b4c57d73f985e715bd523f15ccae25}{available} ()
\begin{DoxyCompactList}\small\item\em Check if new temperature or humidity read is allowed. \end{DoxyCompactList}\item 
bool \hyperlink{class_d_h_t22_ab01022d5617b70268fed481f64e560b9}{read\+Sensor\+Data} ()
\begin{DoxyCompactList}\small\item\em Read data from sensor. \end{DoxyCompactList}\item 
int16\+\_\+t \hyperlink{class_d_h_t22_aeed4f98e419ffb07d3e4c09ebc10162c}{read\+Temperature} ()
\begin{DoxyCompactList}\small\item\em Read temperature from sensor. \end{DoxyCompactList}\item 
int16\+\_\+t \hyperlink{class_d_h_t22_a4ff2d9fac4b8ecf1d72f71bb861c8dcf}{read\+Humidity} ()
\begin{DoxyCompactList}\small\item\em Read humidity from sensor. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
\hyperlink{class_d_h_t22}{D\+H\+T22} sensor class. 

According to the datasheet, the A\+M2302/\+A\+M2303 is a low cost consumer temperature sensor. It may not be used in safety critical applications, emergency stop devices or any other occasion that failure of A\+M2302/\+A\+M2303 may cause personal injury.

The A\+M2302/\+A\+M2303 is factory calibrated. However, deviation may occur with aging.

The temperature/humidity read interval in this library is cached for 2 seconds to prevent heating-\/up the internal chip with continues reading.

Global interrupts are disabled during a synchronous sensor read transfer. This is required to sample the data bit lengths at maximum speed on low-\/end devices without any application interrupts. The read calls are protected with a timeout.

The application is responsible for checking $\sim$0 values after a read which means that the read failed or a timeout occurred. Multiple reads by the application with an average calculation is recommended. 

Definition at line 80 of file Erriez\+D\+H\+T22.\+h.



\subsection{Constructor \& Destructor Documentation}
\index{D\+H\+T22@{D\+H\+T22}!D\+H\+T22@{D\+H\+T22}}
\index{D\+H\+T22@{D\+H\+T22}!D\+H\+T22@{D\+H\+T22}}
\subsubsection[{\texorpdfstring{D\+H\+T22(uint8\+\_\+t pin)}{DHT22(uint8_t pin)}}]{\setlength{\rightskip}{0pt plus 5cm}D\+H\+T22\+::\+D\+H\+T22 (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{pin}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [explicit]}}\hypertarget{class_d_h_t22_a6983635331e939d679888b4a936e0f53}{}\label{class_d_h_t22_a6983635331e939d679888b4a936e0f53}


Constructor \hyperlink{class_d_h_t22}{D\+H\+T22} sensor. 


\begin{DoxyParams}{Parameters}
{\em pin} & Data pin sensor. \\
\hline
\end{DoxyParams}


Definition at line 39 of file Erriez\+D\+H\+T22.\+cpp.



\subsection{Member Function Documentation}
\index{D\+H\+T22@{D\+H\+T22}!available@{available}}
\index{available@{available}!D\+H\+T22@{D\+H\+T22}}
\subsubsection[{\texorpdfstring{available()}{available()}}]{\setlength{\rightskip}{0pt plus 5cm}bool D\+H\+T22\+::available (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{class_d_h_t22_a70b4c57d73f985e715bd523f15ccae25}{}\label{class_d_h_t22_a70b4c57d73f985e715bd523f15ccae25}


Check if new temperature or humidity read is allowed. 

The application should call this function and check if a new temperature and humidity can be read to prevent too fast sensor reads. 
\begin{DoxyRetVals}{Return values}
{\em true} & Available, interval between sensor reads $>$= 2000 ms and sensor read was successful. \\
\hline
{\em false} & Not available, interval between sensor reads too short, or read failed. \\
\hline
\end{DoxyRetVals}


Definition at line 101 of file Erriez\+D\+H\+T22.\+cpp.

\index{D\+H\+T22@{D\+H\+T22}!begin@{begin}}
\index{begin@{begin}!D\+H\+T22@{D\+H\+T22}}
\subsubsection[{\texorpdfstring{begin(uint8\+\_\+t num\+Samples=0)}{begin(uint8_t numSamples=0)}}]{\setlength{\rightskip}{0pt plus 5cm}void D\+H\+T22\+::begin (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{num\+Samples = {\ttfamily 0}}
\end{DoxyParamCaption}
)}\hypertarget{class_d_h_t22_a6ecc18f5b1354e013d717a662f2e9e3d}{}\label{class_d_h_t22_a6ecc18f5b1354e013d717a662f2e9e3d}


Initialize sensor. 


\begin{DoxyParams}{Parameters}
{\em num\+Samples} & Number of samples to calculate temperature and humidity average. This allocates sizeof(int16\+\_\+t) $\ast$ number of samples. Value 0 (default) will disable average calculation.\\
\hline
\end{DoxyParams}
\begin{DoxyVerb} Call this function from setup().\n

 - Connect an external 3k3..10k pull-up resistor between the DAT and VCC pins only when:\n
     - using a AM2302/AM2303 sensor without a DT22 breakout PCB\n
        AND\n
     - the MCU IO pin has no built-in or external pull-up resistor.\n
 - The DHT22 breakout PCB contains a 3k3 pull-up resistor between DAT and VCC.\n
 - Please refer to the MCU datasheet or board schematic for more information about IO pin\n
   pull-up resistors.\end{DoxyVerb}
 

Definition at line 75 of file Erriez\+D\+H\+T22.\+cpp.

\index{D\+H\+T22@{D\+H\+T22}!read\+Humidity@{read\+Humidity}}
\index{read\+Humidity@{read\+Humidity}!D\+H\+T22@{D\+H\+T22}}
\subsubsection[{\texorpdfstring{read\+Humidity()}{readHumidity()}}]{\setlength{\rightskip}{0pt plus 5cm}int16\+\_\+t D\+H\+T22\+::read\+Humidity (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{class_d_h_t22_a4ff2d9fac4b8ecf1d72f71bb861c8dcf}{}\label{class_d_h_t22_a4ff2d9fac4b8ecf1d72f71bb861c8dcf}


Read humidity from sensor. 


\begin{DoxyRetVals}{Return values}
{\em Humidity} & Signed humidity with last digit after the point. \\
\hline
{\em $\sim$0} & Invalid conversion\+: Sensor read error occurred. Use get\+Num\+Retries\+Last\+Conversion() to get number of read retries. \\
\hline
\end{DoxyRetVals}


Definition at line 166 of file Erriez\+D\+H\+T22.\+cpp.

\index{D\+H\+T22@{D\+H\+T22}!read\+Sensor\+Data@{read\+Sensor\+Data}}
\index{read\+Sensor\+Data@{read\+Sensor\+Data}!D\+H\+T22@{D\+H\+T22}}
\subsubsection[{\texorpdfstring{read\+Sensor\+Data()}{readSensorData()}}]{\setlength{\rightskip}{0pt plus 5cm}bool D\+H\+T22\+::read\+Sensor\+Data (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{class_d_h_t22_ab01022d5617b70268fed481f64e560b9}{}\label{class_d_h_t22_ab01022d5617b70268fed481f64e560b9}


Read data from sensor. 

5 Bytes data will be read when interval between previous read $>$= 2000 ms.

The sensor data is read until a valid conversion has been performed. A valid conversion consists of\+:
\begin{DoxyItemize}
\item A valid start condition
\item A successful sensor read (5 Bytes data)
\item A correct checksum 
\begin{DoxyRetVals}{Return values}
{\em true} & Last conversion was successful. \\
\hline
{\em false} & Last conversion was unsuccessful. \\
\hline
\end{DoxyRetVals}

\end{DoxyItemize}

Definition at line 214 of file Erriez\+D\+H\+T22.\+cpp.

\index{D\+H\+T22@{D\+H\+T22}!read\+Temperature@{read\+Temperature}}
\index{read\+Temperature@{read\+Temperature}!D\+H\+T22@{D\+H\+T22}}
\subsubsection[{\texorpdfstring{read\+Temperature()}{readTemperature()}}]{\setlength{\rightskip}{0pt plus 5cm}int16\+\_\+t D\+H\+T22\+::read\+Temperature (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{class_d_h_t22_aeed4f98e419ffb07d3e4c09ebc10162c}{}\label{class_d_h_t22_aeed4f98e419ffb07d3e4c09ebc10162c}


Read temperature from sensor. 

Returns the actual temperature, or a cached temperature when read interval is too short. 
\begin{DoxyRetVals}{Return values}
{\em Temperature} & Signed temperature with last digit after the point. \\
\hline
{\em $\sim$0} & Invalid conversion\+: Sensor read occurred. Use get\+Num\+Retries\+Last\+Conversion() to get number of read retries. \\
\hline
\end{DoxyRetVals}


Definition at line 122 of file Erriez\+D\+H\+T22.\+cpp.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
\hyperlink{_erriez_d_h_t22_8h}{Erriez\+D\+H\+T22.\+h}\item 
\hyperlink{_erriez_d_h_t22_8cpp}{Erriez\+D\+H\+T22.\+cpp}\end{DoxyCompactItemize}
