\href{https://travis-ci.org/Erriez/ErriezDHT22}{\tt }

This is an Arduino library for the calibrated A\+M2302/\+A\+M2303 digital temperature and relative humidity sensor on a \hyperlink{class_d_h_t22}{D\+H\+T22} breakout P\+CB.



\subsection*{Library features}


\begin{DoxyItemize}
\item Read 16-\/bit temperature (synchronous blocking)
\item Read 16-\/bit relative humidity (synchronous blocking)
\item Configurable number of read retries when a read error occurs (default is 1 read + 2 retries)
\item Long time duration example
\item Temperature and humidity average with a configurable number of samples to remove jitter
\end{DoxyItemize}

\subsection*{A\+M2302/\+A\+M2303 sensor specifications}


\begin{DoxyItemize}
\item Voltage\+: 3.\+3 .. 5V
\item Ultra-\/low power\+:
\begin{DoxyItemize}
\item Typical 15uA dormancy
\item Typical 500uA measuring
\end{DoxyItemize}
\item Single wire digital serial interface
\item Calibrated digital signal
\item Outstanding long term stability
\item No additional electronic components needed
\item Humidity\+:
\begin{DoxyItemize}
\item Range\+: 0 .. 99.\+9 RH (Relative Humidity)
\item Resolution\+: 0.\+1 RH
\item Accuracy\+: +/-\/2 RH (at 25 degree Celsius)
\end{DoxyItemize}
\item Temperature\+:
\begin{DoxyItemize}
\item Range\+: -\/40 .. +125 degree Celsius
\item Resolution\+: 0.\+1 degree Celsius
\item Accuracy\+: +/-\/ 0.\+4 degree Celsius
\end{DoxyItemize}
\item Minimum read interval\+: 2000 ms
\item $\sim$31ms to synchronous read humidity, temperature and parity data from sensor (5 Bytes)
\end{DoxyItemize}

\subsection*{Safety warning}

According to the datasheet, the A\+M2302/\+A\+M2303 is a low cost consumer temperature sensor. It may not be used in safety critical applications, emergency stop devices or any other occasion that failure of A\+M2302/\+A\+M2303 may cause personal injury.

\subsection*{Hardware}



{\bfseries Pull-\/up resistor D\+AT pin}


\begin{DoxyItemize}
\item Connect an external {\ttfamily 3k3..10k} pull-\/up resistor between the {\ttfamily D\+AT} and {\ttfamily V\+CC} pins only when\+:
\begin{DoxyItemize}
\item Using a A\+M2302/\+A\+M2303 sensor without a D\+T22 breakout P\+CB {\bfseries and} the M\+CU IO pin has no built-\/in or external pull-\/up resistor.
\end{DoxyItemize}
\item The \hyperlink{class_d_h_t22}{D\+H\+T22} breakout P\+CB contains a {\ttfamily 3k3} pull-\/up resistor between {\ttfamily D\+AT} and {\ttfamily V\+CC}.
\item Please refer to the M\+CU datasheet or board schematic for more information about IO pin pull-\/up resistors.
\end{DoxyItemize}

{\bfseries External capacitor}


\begin{DoxyItemize}
\item Tip\+: Connect a {\ttfamily 100nF} capacitor between the sensor pins {\ttfamily V\+CC} and {\ttfamily G\+ND} when read errors occurs. This may stabilize the power supply.
\end{DoxyItemize}

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*4{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}{\bf Board -\/ \hyperlink{class_d_h_t22}{D\+H\+T22} pins }&\PBS\centering {\bf V\+CC }&\PBS\centering {\bf G\+ND }&\PBS\centering {\bf D\+AT  }\\\cline{1-4}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}{\bf Board -\/ \hyperlink{class_d_h_t22}{D\+H\+T22} pins }&\PBS\centering {\bf V\+CC }&\PBS\centering {\bf G\+ND }&\PBS\centering {\bf D\+AT  }\\\cline{1-4}
\endhead
Arduino U\+NO / Nano / Micro (A\+T\+Mega328 boards) &\PBS\centering 5V (or 3\+V3) &\PBS\centering G\+ND &\PBS\centering 2 (D\+I\+G\+I\+T\+AL pin) \\\cline{1-4}
Arduino Leonardo &\PBS\centering 5V (or 3\+V3) &\PBS\centering G\+ND &\PBS\centering 2 (D\+I\+G\+I\+T\+AL pin) \\\cline{1-4}
Arduino Mega2560 &\PBS\centering 5V (or 3\+V3) &\PBS\centering G\+ND &\PBS\centering 2 (D\+I\+G\+I\+T\+AL pin) \\\cline{1-4}
Arduino D\+UE (A\+T\+S\+A\+M3\+X8E) &\PBS\centering 3\+V3 &\PBS\centering G\+ND &\PBS\centering 2 (D\+I\+G\+I\+T\+AL pin) \\\cline{1-4}
E\+S\+P8266 (E\+S\+P12E / We\+Mos D1 R2 / Node\+M\+CU v2 or v3) &\PBS\centering 3\+V3 &\PBS\centering G\+ND &\PBS\centering G\+P\+I\+O4 (D2) \\\cline{1-4}
E\+S\+P32 (We\+Mos Lolin32 O\+L\+ED / We\+Mos L\+O\+L\+IN D32) &\PBS\centering 3\+V3 &\PBS\centering G\+ND &\PBS\centering G\+P\+I\+O4 \\\cline{1-4}
\end{longtabu}
Notes\+:


\begin{DoxyItemize}
\item {\ttfamily G\+P\+I\+O4} uses sketch pin number {\ttfamily 4} and is labeled as {\ttfamily D2} on some We\+Mos E\+S\+P8266 boards.
\item Other M\+CU\textquotesingle{}s may work, but are not tested.
\end{DoxyItemize}

\subsection*{Examples}

Arduino I\+DE $\vert$ Examples $\vert$ Erriez \hyperlink{class_d_h_t22}{D\+H\+T22} Temperature \& Humidity\+:


\begin{DoxyItemize}
\item \href{https://github.com/Erriez/ErriezDHT22/blob/master/examples/DHT22/DHT22.ino}{\tt D\+H\+T22} Getting started example.
\item \href{https://github.com/Erriez/ErriezDHT22/blob/master/examples/DHT22Average/DHT22Average.ino}{\tt D\+H\+T22\+Average} Calculate average temperature and humidity.
\item \href{https://github.com/Erriez/ErriezDHT22/blob/master/examples/DHT22DurationTest/DHT22DurationTest.ino}{\tt D\+H\+T22\+Duration\+Test} Test reliability connection.
\item \href{https://github.com/Erriez/ErriezDHT22/blob/master/examples/DHT22Logging/DHT22Logging.ino}{\tt D\+H\+T22\+Logging} Write temperature and humidity every 10 minutes to .C\+SV file on S\+D-\/card with D\+S3231 R\+TC.
\item \href{https://github.com/Erriez/ErriezDHT22/blob/master/examples/DHT22LowPower/DHT22LowPower.ino}{\tt D\+H\+T22\+Low\+Power} Low\+Power A\+VR targets only. Arduino Pro or Pro Mini at 8\+M\+Hz is recommended.
\end{DoxyItemize}

\subsection*{Documentation}


\begin{DoxyItemize}
\item \href{https://erriez.github.io/ErriezDHT22}{\tt Doxygen online H\+T\+ML}
\item \href{https://github.com/Erriez/ErriezDHT22/raw/gh-pages/latex/ErriezDHT22.pdf}{\tt Doxygen P\+DF}
\item \href{https://raw.githubusercontent.com/Erriez/ErriezDHT22/master/extras/AM2303_datasheet.pdf}{\tt A\+M2303 datasheet}
\item \href{https://www.google.com/search?q=DHT22+datasheet}{\tt D\+H\+T22 datasheet}
\end{DoxyItemize}

\subsection*{Usage}

{\bfseries Initialization}


\begin{DoxyCode}
1 \{c++\}
2 #include <ErriezDHT22.h>
3 
4 // Connect DTH22 DAT pin to Arduino board
5 
6 // Connect DTH22 DAT pin to Arduino DIGITAL pin
7 #if defined(ARDUINO\_ARCH\_AVR) || defined(ARDUINO\_SAM\_DUE)
8 #define DHT22\_PIN      2
9 #elif defined(ESP8266) || defined(ESP32)
10 #define DHT22\_PIN      4 // GPIO4 (Labeled as D2 on some ESP8266 boards)
11 #else
12 #error "May work, but not tested on this target"
13 #endif
14 
15 DHT22 dht22 = DHT22(DHT22\_PIN);
16 
17 void setup()
18 \{
19     // Initialize serial port
20     Serial.begin(115200);
21     Serial.println(F("DHT22 temperature and humidity sensor example\(\backslash\)n"));
22 
23     // Initialize sensor
24     dht22.begin();
25 \}
\end{DoxyCode}


{\bfseries Read temperature and humidity}


\begin{DoxyCode}
1 \{c++\}
2 void loop()
3 \{
4     // Check minimum interval of 2000 ms between sensor reads
5     if (dht22.available()) \{
6         // Read temperature from sensor
7         int16\_t temperature = dht22.readTemperature();
8 
9         // Read humidity from sensor
10         int16\_t humidity = dht22.readHumidity();
11 
12         if (temperature == ~0) \{
13             // Print error (Check hardware connection)
14             Serial.print(F("Temperature: Error"));
15         \} else \{
16             // Print temperature
17             Serial.print(F("Temperature: "));
18             Serial.print(temperature / 10);
19             Serial.print(F("."));
20             Serial.print(temperature % 10);
21             Serial.println(F(" *C"));
22         \}
23 
24         if (humidity == ~0) \{
25             // Print error (Check hardware connection)
26             Serial.print(F("Humidity: Error"));
27         \} else \{
28             // Print humidity
29             Serial.print(F("Humidity: "));
30             Serial.print(humidity / 10);
31             Serial.print(F("."));
32             Serial.print(humidity % 10);
33             Serial.println(F(" %"));
34         \}
35 
36         Serial.println();
37       \}
38 \}
\end{DoxyCode}


{\bfseries Serial output}


\begin{DoxyCode}
1 DHT22 temperature and humidity sensor example
2 
3 Temperature: 17.7 *C
4 Humidity: 41.0 %
5 
6 Temperature: 17.8 *C
7 Humidity: 41.1 %
8 
9 ...
\end{DoxyCode}


\subsection*{Library dependencies}


\begin{DoxyItemize}
\item {\ttfamily Low\+Power} library for {\ttfamily D\+H\+T22\+Low\+Power.\+ino}.
\end{DoxyItemize}

\subsection*{Library installation}

Please refer to the \href{https://github.com/Erriez/ErriezArduinoLibrariesAndSketches/wiki}{\tt Wiki} page.

\subsection*{Other Arduino Libraries and Sketches from Erriez}


\begin{DoxyItemize}
\item \href{https://github.com/Erriez/ErriezArduinoLibrariesAndSketches}{\tt Erriez Libraries and Sketches} 
\end{DoxyItemize}